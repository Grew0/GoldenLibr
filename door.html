<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset='utf-8'>
    <title>Библиотека Золотой академии</title>
    <link rel='stylesheet' href="door.css">
</head>

<body>
    <main>
        <div id="door_shadow"></div>
        <img id="door_back" src="door.svg"> 
        <img id="door" src="door.svg" onclick="open_(this)"> 
    </main>    
</body>
</html>

<script>
    function res(){
        let w = window.innerWidth, h = window.innerHeight;
        let door = document.getElementById("door");
        let door_back = document.getElementById("door_back");
        let door_shadow = document.getElementById("door_shadow");

        if(h > w){
            door.style.height = "60vh";
            door_back.style.height = "60vh";
        }else{
            door.style.height = "80vh";
            door_back.style.height = "80vh";
        }

        if(door.height * door.width < 2){
            setTimeout(res, 1);
            return
        }

        door_shadow.style.width = (door.width * 0.8) + "px";
        door_shadow.style.height = (door.height * 0.8) + "px";
        
        door.style.marginTop = (window.innerHeight - door.height) / 2 + "px";
        door_back.style.marginTop = (window.innerHeight - door.height) / 2 + "px";
        door_shadow.style.marginTop = (window.innerHeight - door.height*0.8) / 2 + "px";

        door.style.marginLeft = (window.innerWidth - door.width) / 2 + "px";
        door_back.style.marginLeft = (window.innerWidth - door.width) / 2 + "px";
        door_shadow.style.marginLeft = (window.innerWidth - door.width*0.8) / 2 + "px";


        door.style.opacity = 1;
        door_back.style.opacity = 1;
    }

    window.addEventListener('resize', res, true);
    res();

    function open_(door){
        door.style.animationName = "rotate";
        door_shadow.style.animationName = "more";
        setTimeout(()=>{
            document.getElementsByTagName("body")[0].style.background="#fff";
            document.getElementsByTagName("main")[0].style.opacity=0;
            document.getElementsByTagName("main")[0].style.transition="1.5s";
            
            setTimeout( ()=>{
                    window.location.href = 'Shells.html';
                }, 1500);
        }, 500);
    }

    
    
</script>
